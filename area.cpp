#include <BITS/stdc++.h>
#include "area.h"
using namespace std;

/*
                                           *                       *
    *  *  *  *  *  *  *  *  *  *  *  *  *  *  *                 *  *  *                    *
                      *                                *  *  *  *           *  *  *  *  *  *  *
                   *                       *                    *           *              *
       *  *  *  *  *  *  *  *  *  *  *  *  *  *                 *           *              *
       *           *           *           *        *  *  *  *  *  *  *     *              *
       *           *           *           *                    *           *              *
       *           *  *  *  *  *           *                 *  *           *              *
       *           *           *           *                 *  *  *        *  *  *  *  *  *
       *           *           *           *              *     *     *     *              *
       *           *           *           *              *     *
       *           *  *  *  *  *           *           *        *           *           *
       *           *           *           *        *           *           *  *           *
       *           *           *           *                    *        *                 *  *
       *  *  *  *  *  *  *  *  *  *  *  *  *                    *     *                       *
       *                                   *                    *
*/

/*
          _____                   _______                   _____        _____                    _____                   _______                   _____          
         /\    \                 /::\    \                 /\    \      |\    \                  /\    \                 /::\    \                 /\    \         
        /::\    \               /::::\    \               /::\____\     |:\____\                /::\    \               /::::\    \               /::\____\        
       /::::\    \             /::::::\    \             /:::/    /     |::|   |               /::::\    \             /::::::\    \             /::::|   |        
      /::::::\    \           /::::::::\    \           /:::/    /      |::|   |              /::::::\    \           /::::::::\    \           /:::::|   |        
     /:::/\:::\    \         /:::/~~\:::\    \         /:::/    /       |::|   |             /:::/\:::\    \         /:::/~~\:::\    \         /::::::|   |        
    /:::/__\:::\    \       /:::/    \:::\    \       /:::/    /        |::|   |            /:::/  \:::\    \       /:::/    \:::\    \       /:::/|::|   |        
   /::::\   \:::\    \     /:::/    / \:::\    \     /:::/    /         |::|   |           /:::/    \:::\    \     /:::/    / \:::\    \     /:::/ |::|   |        
  /::::::\   \:::\    \   /:::/____/   \:::\____\   /:::/    /          |::|___|______    /:::/    / \:::\    \   /:::/____/   \:::\____\   /:::/  |::|   | _____  
 /:::/\:::\   \:::\____\ |:::|    |     |:::|    | /:::/    /           /::::::::\    \  /:::/    /   \:::\ ___\ |:::|    |     |:::|    | /:::/   |::|   |/\    \ 
/:::/  \:::\   \:::|    ||:::|____|     |:::|    |/:::/____/           /::::::::::\____\/:::/____/  ___\:::|    ||:::|____|     |:::|    |/:: /    |::|   /::\____\
\::/    \:::\  /:::|____| \:::\    \   /:::/    / \:::\    \          /:::/~~~~/~~      \:::\    \ /\  /:::|____| \:::\    \   /:::/    / \::/    /|::|  /:::/    /
 \/_____/\:::\/:::/    /   \:::\    \ /:::/    /   \:::\    \        /:::/    /          \:::\    /::\ \::/    /   \:::\    \ /:::/    /   \/____/ |::| /:::/    / 
          \::::::/    /     \:::\    /:::/    /     \:::\    \      /:::/    /            \:::\   \:::\ \/____/     \:::\    /:::/    /            |::|/:::/    /  
           \::::/    /       \:::\__/:::/    /       \:::\    \    /:::/    /              \:::\   \:::\____\        \:::\__/:::/    /             |::::::/    /   
            \::/____/         \::::::::/    /         \:::\    \   \::/    /                \:::\  /:::/    /         \::::::::/    /              |:::::/    /    
             ~~                \::::::/    /           \:::\    \   \/____/                  \:::\/:::/    /           \::::::/    /               |::::/    /     
                                \::::/    /             \:::\    \                            \::::::/    /             \::::/    /                /:::/    /      
                                 \::/____/               \:::\____\                            \::::/    /               \::/____/                /:::/    /       
                                  ~~                      \::/    /                             \::/____/                 ~~                      \::/    /        
                                                           \/____/                                                                                 \/____/         
*/
                                                                                                                                                                   

//  ____  ____  ____  _  _   __   ____  ____ 
// (  _ \(  _ \(_  _)( \/ ) /__\ (_  _)( ___)
//  ) __/ )   / _)(_  \  / /(__)\  )(   )__) 
// (__)  (_)\_)(____)  \/ (__)(__)(__) (____)


// ********
// 函数名称：count
// 函数功能：计算多边形面积
// 注意事项：需使用 get 函数初始化变量
// ********
void polygon::count() {
    if (n <= 2) { print(); return; }
    rt = 0;
    for (int i = 0; i < n; i++) { rt += ((x[i] * y[i + 1]) - (x[i + 1] * y[i])) / 2; }
    rt = fabs(rt);
    delete[]x;
    delete[]y;
}

// ********
// 函数名称：get
// 函数功能：从控制台输入变量，判断顶点数是否合法（大于 2）
// 注意事项：
// ********
void polygon::get() {
    cout << "请输入多边形顶点个数：";
    cin >> n;
    if (n <= 2) { print(); return; }
    x = new float[n + 1], y = new float[n + 1];
    for (int i = 0; i < n; i++) {
        cout << "请输入第 " << i + 1 << " 个顶点坐标：";
        cin >> x[i] >> y[i];
    }
    x[n] = x[0], y[n] = y[0];
}


//  ____  __  __  ____  __    ____   ___ 
// (  _ \(  )(  )(  _ \(  )  (_  _) / __)
//  ) __/ )(__)(  ) _ < )(__  _)(_ ( (__ 
// (__)  (______)(____/(____)(____) \___)


// ********
// 函数名称：start
// 函数功能：起始函数
// ********
void polygon::start() {
    rt = 0;
    get();
    count();
}

// ********
// 函数名称：print
// 函数功能：控制台输出计算结果
// 注意事项：需要使用 count 函数计算返回值
void polygon::print() {
    if (n == 3) { cout << "三角的面积为：" << rt << endl; }
    else if (n > 3) { cout << "多边形的面积为：" << rt << endl; }
    else { cout << "参数不合法" << endl; }
}

// ********
// 函数名称：result
// 函数功能：返回计算结果
// 注意事项：需要使用 count 函数计算返回值
// ********
float polygon::result() { return rt; }